<!doctype html>
<html lang="de">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Titel für die Webseite -->
    <title>Kleiderspende</title>
    <!-- Favicon für die Webseite -->
    <link rel="icon" type="image/x-icon" href="./sources/selbst_erstelltes_logo_shirt_ohne_hintergrund.png">
    <!-- Bootstrap CSS für responsives Design -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body>
    <!-- Header-Bereich mit Navigationsleiste -->
    <header class="sticky-lg-top bg-white">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <nav class="navbar fixed-lg-top navbar-expand-md navbar-light bg-light border rounded-3 mt-md-2">
                        <div class="container-fluid">
                            <!-- Logo und Seitenname -->
                            <a class="navbar-brand me-5" href="./index.html">
                                <img src="./sources/selbst_erstelltes_logo_shirt_ohne_hintergrund.png"
                                    alt="kleiderspende logo" width="80" height="auto">
                                Kleiderspende
                            </a>
                            <!-- Burger-Menü für kleine Bildschirme -->
                            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                                data-bs-target="#navbarSupportedContent">
                                <span class="navbar-toggler-icon"></span>
                            </button>
                            <!-- Navigationsmenü -->
                            <div class="container-fluid">
                                <div class="row">
                                    <div class="col-md-6 mx-md-auto">
                                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                                            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                                                <li class="nav-item">
                                                    <a class="nav-link active" href="./index.html">Startseite</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a class="nav-link" href="./geschichte.html">Geschichte</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a class="nav-link" href="./mitglieder.html">Mitglieder</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </header>

    <main>

        <!-- Vorstellung des Vereins -->
        <section>
            <div class="container">
                <div class="row text-center">
                    <div class="col-12 mt-md-2">
                        <h1 class="display-4">Willkommen bei der Kleiderspende</h1>
                        <p class="lead">Wir sind ein gemeinnütziger Verein, der Kleidung an Bedürftige spendet.</p>
                    </div>
                </div>
            </div>
        </section>

        <section>
            <!-- Beschreibung der Spendenmöglichkeit -->
            <div class="container">
                <div class="row">
                    <div class="col-12 mb-3">
                        <h6>Kleiderspende in das persönlich ausgewählte Krisengebiet</h6>
                        <p>
                            Sehr gerne nehmen wir Ihre Kleiderspende an. Das besondere bei uns? Sie dürfen entscheiden,
                            in welches Krisengebiet wir Ihre Spende versenden.<br>
                            Falls eine Abholung gewünscht wird, muss Ihre PLZ mit „10“ beginnen.<br>
                            Alternativ können Sie Ihre Spende direkt bei unserer Geschäftsstelle (10115 Berlin) abgeben.
                        </p>
                    </div>

                </div>
            </div>

            <!-- Formular für die Kleiderspende-->
            <div class="container mb-5 border border-primary rounded-3 p-3">
                <div class="row my-1 text-center">
                    <div class="col mb-3">
                        <h6>Registrierung Ihrer Kleiderspende</h6>
                    </div>
                </div>
                <!-- Auswahl des Krisengebiets -->
                <form class="px-2" method="GET" action="./abschluss.html" onsubmit="return validatePlz(event)">
                    <div class="row">
                        <label for="krisengebiet" class="form-label">Krisengebiet auswählen</label>
                        <select class="mx-2 col mb-3 form-select" name="Krisengebiet" required>
                            <option value="">Bitte wählen...</option>
                            <option value="Krisengebiet 1">Krisengebiet 1</option>
                            <option value="Krisengebiet 2">Krisengebiet 2</option>
                            <option value="Krisengebiet 3">Krisengebiet 3</option>
                        </select>
                    </div>
                    <!-- Auswahl der Kleidungsart -->
                    <div class="row">
                        <label for="kleidungsart" class="form-label">Art der Kleidung</label>
                        <select class="mx-2 col mb-3 form-select" size="6" multiple name="Kleidungsart" required>
                            <option value="T-Shirt">T-Shirt</option>
                            <option value="Schuhe">Schuhe</option>
                            <option value="Hosen">Hosen</option>
                            <option value="Pullover">Pullover</option>
                            <option value="Jacken">Jacken</option>
                            <option value="Sonstiges">Sonstiges</option>
                        </select>
                    </div>
                    <!-- Auswahl der Übergabemethode -->
                    <div class="row">
                        <div class="col-12">
                            <p>Bitte wählen Sie aus, ob Sie Ihre Spende abholen lassen möchten oder ob Sie Ihre Spende
                                bei unserer Geschäftsstelle abgeben möchten.</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="mx-2 col-12 col-md-3 mt-1 mb-3 form-check form-check-inline">
                            <label class="form-check-label" for="validationFormCheck2">Abholung</label>
                            <input type="radio" class="form-check-input" id="validationFormCheck2"
                                name="Abholung oder Übergabe" value="Abholung" required>
                        </div>
                        <div class="col-5 col-12 col-md-3 mt-1 mb-3 form-check form-check-inline">
                            <label class="form-check-label" for="validationFormCheck3">Übergabe an der
                                Geschäftsstelle</label>
                            <input type="radio" class="form-check-input" id="validationFormCheck3"
                                name="Abholung oder Übergabe" value="Übergabe bei der Geschäftsstelle" required>
                        </div>
                    </div>

                    <!-- Adressdaten werden eingeblendet und das Attribut "required" gesetzt, wenn Abholung (id="validationFormCheck2") angewählt wurde -->
                    <div class="row d-none" id="adressdatenBeschreibung">
                        <div class="col-12 mt-3">
                            <p>Bitte geben Sie Ihre Adressdaten an, damit wir Ihre Spende bei Ihnen abholen können.</p>
                        </div>
                    </div>
                    <div class="row d-none" id="vornameNachname">
                        <div class="col-md-6 mb-3">
                            <label for="inputVorname" class="form-label">Vorname</label>
                            <input type="text" class="form-control" placeholder="Vorname" id="inputVorname">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="inputLastName" class="form-label">Nachname</label>
                            <input type="text" class="form-control" placeholder="Nachname" id="inputLastName">
                        </div>
                    </div>
                    <div class="row d-none" id="strasseNummer">
                        <div class="mb-3 col-12">
                            <label for="inputAddress" class="form-label">Strasse und Hausnummer</label>
                            <input type="text" class="form-control" id="inputAddress"
                                placeholder="Strasse und Hausnummer">
                        </div>
                    </div>
                    <div class="row d-none" id="plzOrtschaft">
                        <div class="mb-3 col-md-2">
                            <label for="inputPLZ" class="form-label">PLZ</label>
                            <input type="text" class="form-control" placeholder="PLZ" id="inputPLZ" pattern="\d{5}"
                                title="Bitte geben Sie eine 5-stellige PLZ ein">
                        </div>
                        <div class="mb-3 col-md-10">
                            <label for="inputCity" class="form-label">Ortschaft</label>
                            <input type="text" class="form-control" placeholder="Ortschaft" id="inputCity">
                        </div>
                    </div>
                    <div class="row d-none" id="land">
                        <div class="mb-3 col-md-6">
                            <label for="inputState" class="form-label">Land (derzeit nur für Deutschland
                                möglich)</label>
                            <!-- Das Element ist deaktiviert, da aktuell der Dienst nur deutschlandweit verfügbar ist-->
                            <select id="inputState" class="form-select" disabled>
                                <option value="Deutschland">Deutschland</option>
                            </select>
                        </div>
                    </div>
                    <!-- Formular abschicken -->
                    <div class="row">
                        <div class="mt-1 col-12">
                            <button type="submit" class="btn btn-primary">Spende
                                registrieren</button>
                        </div>
                    </div>
                </form>
            </div>
        </section>

    </main>

    <!-- Footer mit rechtlichen Hinweisen -->
    <footer class="footer fixed-bottom bg-light">
        <div class="container">
            <div class="row">
                <div class="text-center">
                    <p><a href="./rechtliches.html"
                            class="link-secondary link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover">Rechtliche
                            Hinweise
                        </a>
                    </p>
                </div>
            </div>
        </div>
    </footer>

</body>

<script>
    // Validierung der PLZ

    function validatePlz(event) {
        var plzInput = document.getElementById("inputPLZ");
        var plz = plzInput.value;

        if (!plz.startsWith("10") && (isValidateFormAdded)) {
            event.preventDefault();
            alert("Aktuell unterstützen wir nur Abholungen in der Nähe unserer Geschäftsstelle. Bitte geben Sie eine PLZ an, die mit 10 beginnt oder geben Sie Ihre Spende direkt bei unserer Geschäftsstelle ab.");
            return false;
        }

        return true;
    }

</script>

<script>
    // Steuerung der Sichtbarkeit und der Pflichtfelder der Adressdaten
    var isValidateFormAdded = false;

    document.getElementById("validationFormCheck2").addEventListener("change", function () {
        if (this.value === "Abholung") {
            document.getElementById("adressdatenBeschreibung").classList.remove("d-none");
            document.getElementById("vornameNachname").classList.remove("d-none");
            document.getElementById("strasseNummer").classList.remove("d-none");
            document.getElementById("plzOrtschaft").classList.remove("d-none");
            document.getElementById("land").classList.remove("d-none");

            document.getElementById("inputVorname").setAttribute("required", "true");
            document.getElementById("inputLastName").setAttribute("required", "true");
            document.getElementById("inputAddress").setAttribute("required", "true");
            document.getElementById("inputPLZ").setAttribute("required", "true");
            document.getElementById("inputCity").setAttribute("required", "true");

            document.getElementById("inputVorname").setAttribute("name", "Vorname");
            document.getElementById("inputLastName").setAttribute("name", "Nachname");
            document.getElementById("inputAddress").setAttribute("name", "Strasse und Hausnummer");
            document.getElementById("inputPLZ").setAttribute("name", "PLZ");
            document.getElementById("inputCity").setAttribute("name", "Ortschaft");
            document.getElementById("inputState").setAttribute("name", "Land");

            isValidateFormAdded = true;

        }
    });

    document.getElementById("validationFormCheck3").addEventListener("change", function () {
        if (this.value === "Übergabe bei der Geschäftsstelle") {
            document.getElementById("adressdatenBeschreibung").classList.add("d-none");
            document.getElementById("vornameNachname").classList.add("d-none");
            document.getElementById("strasseNummer").classList.add("d-none");
            document.getElementById("plzOrtschaft").classList.add("d-none");
            document.getElementById("land").classList.add("d-none");

            document.getElementById("inputVorname").removeAttribute("required");
            document.getElementById("inputLastName").removeAttribute("required");
            document.getElementById("inputAddress").removeAttribute("required");
            document.getElementById("inputPLZ").removeAttribute("required");
            document.getElementById("inputCity").removeAttribute("required");

            document.getElementById("inputVorname").removeAttribute("name");
            document.getElementById("inputLastName").removeAttribute("name");
            document.getElementById("inputAddress").removeAttribute("name");
            document.getElementById("inputPLZ").removeAttribute("name");
            document.getElementById("inputCity").removeAttribute("name");
            document.getElementById("inputState").removeAttribute("name");

            isValidateFormAdded = false;
        }
    });



</script>

<script>
    // Schutz vor Cross-Site-Scripting (XSS)
    document.addEventListener("DOMContentLoaded", function () {
        var inputs = document.querySelectorAll("input");
        for (var i = 0; i < inputs.length; i++) {
            inputs[i].addEventListener("change", function () {
                this.value = sanitizeInput(this.value);
            });
        }
    });

    function sanitizeInput(input) {
        return input.replace(/[<>]/g, '');
    }
</script>

<!-- Bootstrap JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>

</html>